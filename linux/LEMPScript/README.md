# Server Manager: Инструмент установки LEMP/LAMP стека и панелей управления

<p align="center">
  <strong>Мощный инструмент для автоматизации настройки и управления веб-сервером для Ubuntu и CentOS</strong>
</p>

## Обзор

Server Manager — это комплексный Bash-скрипт, который автоматизирует развертывание и настройку LEMP (Nginx, MySQL/MariaDB, PHP) или LAMP (Apache, MySQL/MariaDB, PHP) стека с оптимизацией производительности и функциями безопасности для дистрибутивов Ubuntu и CentOS. Скрипт также поддерживает установку популярных панелей управления сервером.

## Особенности

- **Полностью автоматизированная установка** — настройка всего стека одной командой
- **Гибкая конфигурация** — выбор между Nginx, Apache или Nginx+Apache в режиме прокси
- **Поддержка нескольких версий PHP** — выбор между PHP 7.4, 8.0, 8.1 и 8.2
- **Выбор СУБД** — MariaDB или MySQL с возможностью указать конкретную версию
- **Поддержка панелей управления** — установка ISPManager, Hestia Control Panel, FastPanel или aaPanel
- **Автоматическая настройка HTTPS** — интеграция с Let's Encrypt для SSL-сертификатов
- **Расширенная безопасность** — настройка Fail2Ban, файервола и дополнительных мер защиты
- **Оптимизация производительности** — настройки для максимальной производительности
- **Добавление нескольких сайтов** — простое добавление новых доменов к существующей установке
- **Умное определение** — автоматическое обнаружение установленных компонентов

## Поддерживаемые дистрибутивы

- Ubuntu 18.04+
- Debian 10+
- CentOS/RHEL 7+
- AlmaLinux/Rocky Linux 8+

## Быстрый старт

1. Скачайте скрипт:

```bash
wget https://github.com/spoveddd/LEMPScript/blob/main/servermanager.sh
```

2. Сделайте его исполняемым:

```bash
chmod +x servermanager.sh
```

3. Запустите скрипт с правами root:

```bash
sudo ./servermanager.sh
```

4. Следуйте интерактивным подсказкам для настройки вашего сервера

## Параметры командной строки

Скрипт поддерживает следующие параметры:

- `--uninstall`: Удаление всех установленных компонентов
- `--help`: Отображение справки

## Компоненты

### Веб-серверы
- **Nginx** — Высокопроизводительный HTTP-сервер и обратный прокси
- **Apache** — Надежный и функциональный HTTP-сервер
- **Nginx+Apache** — Nginx как фронтенд, Apache как бэкенд для обработки динамического контента

### PHP
- Поддерживаемые версии: 7.4, 8.0, 8.1, 8.2
- Обработчики: PHP-FPM, mod_php, PHP-CGI

### Базы данных
- **MariaDB** — Высокопроизводительный форк MySQL
- **MySQL** — Популярная система управления базами данных

### Панели управления
- **ISPManager** — Популярная панель управления хостингом
- **Hestia Control Panel** — Открытая и бесплатная панель управления
- **FastPanel** — Новая панель управления с современным интерфейсом
- **aaPanel** — Легкая панель управления с открытым исходным кодом

## Инструкция по использованию

### Установка LEMP/LAMP стека

Запустите скрипт и выберите опцию "Установить LEMP/LAMP стек". Следуйте инструкциям для:
- Выбора веб-сервера (Nginx, Apache или Nginx+Apache)
- Выбора версии PHP
- Выбора СУБД (MariaDB или MySQL)
- Указания доменного имени и пути к сайту
- Создания базы данных и пользователя
- Настройки SSL-сертификатов
- Настройки файла подкачки (swap)

### Установка панели управления

Запустите скрипт и выберите опцию "Установить панель управления сервером". Выберите одну из доступных панелей и следуйте инструкциям по установке.

### Добавление нового сайта

Если LEMP/LAMP стек уже установлен, вы можете запустить скрипт повторно и выбрать опцию "Добавить новый сайт". Укажите доменное имя, путь к директории сайта и другие параметры.

### Удаление компонентов

Для удаления всех установленных компонентов используйте команду:

```bash
sudo ./servermanager.sh --uninstall
```

## Меры безопасности

Скрипт автоматически настраивает:
- Файервол (UFW для Debian/Ubuntu, firewalld для CentOS/RHEL)
- Fail2Ban для защиты от брутфорс-атак
- Заголовки безопасности для веб-серверов
- Ограничения директорий
- Защиту от DDoS-атак для Nginx
- Настройку прав доступа к файлам конфигурации

## Структура логов

Все действия скрипта логируются в файл `/var/log/lemp_automate.log`. При возникновении проблем рекомендуется проверить этот файл для диагностики.

## Автор и поддержка

Павлович Владислав - [pavlovich.live](https://pavlovich.live)

По вопросам функционирования и поддержки: TG [@femid00](https://t.me/femid00)

## Лицензия

GNU General Public License v3.0

## Вклад в проект

Предложения по улучшению и сообщения об ошибках приветствуются! Пожалуйста, создавайте issues или pull requests в репозитории проекта.

---

### Примечание по безопасности

Этот скрипт устанавливает и настраивает компоненты с учетом лучших практик безопасности, но рекомендуется дополнительно проверить настройки для производственных серверов. Для критически важных систем всегда консультируйтесь со специалистом по безопасности.