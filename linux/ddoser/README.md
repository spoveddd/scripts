# DDoSer — Bash-скрипт для анализа и реагирования на DDoS

## Описание

**DDoSer** — это мощный интерактивный bash-скрипт для администраторов Linux-серверов, который помогает обнаруживать и частично автоматически реагировать на DDoS-атаки. Скрипт анализирует логи веб-серверов и сетевые соединения, выявляет подозрительные IP, предлагает команды для блокировки и сохраняет отчёты. Поддерживает работу с популярными панелями управления хостингом и мультихостингом.

---

## Быстрый запуск одной командой

```bash
wget https://raw.githubusercontent.com/spoveddd/scripts/main/linux/ddoser/ddoser.sh && sleep 2 && bash ddoser.sh
```

---

## Локальный запуск

1. **Скачайте скрипт:**
    ```bash
    wget https://raw.githubusercontent.com/spoveddd/scripts/main/linux/ddoser/ddoser.sh
    ```
2. **Сделайте его исполняемым:**
    ```bash
    chmod +x ddoser.sh
    ```
3. **Запустите:**
    ```bash
    ./ddoser.sh
    ```

---

## Основной функционал

- **Автоматическое определение ОС и панели управления** (ISPmanager, FastPanel, Hestia, Vesta, DirectAdmin, cPanel, Nginx, Apache)
- **Анализ access-логов**:
  - Топ IP по количеству запросов
  - Топ URI (запрашиваемые страницы)
  - Топ User-Agent
  - Подозрительные IP (выделяются по порогу запросов)
- **Анализ сетевых соединений** (netstat, ss):
  - Топ IP по количеству соединений
- **Мониторинг в реальном времени**:
  - Выберите время мониторинга (по умолчанию 30 секунд)
  - В течение выбранного времени скрипт анализирует новые записи в логах и выводит топ IP/URI за этот период
- **Генерация команд для блокировки IP** (iptables, ipset, ufw)
- **Сохранение подробных отчётов** в /var/log/ddoser_script.log
- **Красивый цветной вывод и удобное меню**
- **Показ нагрузки на сервер** (uptime, топ процессов по CPU и памяти)
- **Показ ссылки для входа в панель управления** (если возможно)

---

## Пример меню

```
==============================
 DDoSer: Анализ подозрительной активности
 ОС: Ubuntu 24.04
 Панель: fastpanel
==============================
Ссылка для входа в панель: https://159.253.18.203:8888/
Топ IP по логам за сегодня:
    372 176.60.70.103
      2 185.4.72.146

Выберите действие:
1. Заблокировать IP
2. Сохранить отчёт
3. Показать ссылку на панель
4. Мониторинг в реальном времени
0. Выход
```

---

## Требования
- bash
- netstat, ss, awk, grep, sort, uniq, tail
- Права root для блокировки IP

---

## Репозиторий
[https://github.com/spoveddd/scripts/tree/main/linux/ddoser](https://github.com/spoveddd/scripts/tree/main/linux/ddoser)

---

**DDoSer** — ваш быстрый помощник для анализа и реагирования на DDoS прямо с консоли! 